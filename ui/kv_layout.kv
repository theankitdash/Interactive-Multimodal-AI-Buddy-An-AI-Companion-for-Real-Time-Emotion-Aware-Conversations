RootWidget:
    AuthScreen:
    MainScreen:

<AuthScreen>:
    name: "auth"
    BoxLayout:
        orientation: "vertical"
        padding: "32dp"
        spacing: "20dp"
        canvas.before:
            Color:
                rgba: (0.12, 0.12, 0.15, 1)
            Rectangle:
                pos: self.pos
                size: self.size

        # Camera preview
        Image:
            id: camera_preview
            size_hint_y: 0.6
            canvas.before:
                Color:
                    rgba: (0.10, 0.10, 0.13, 1)  
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [16,]

        # Username input (only in registration)
        TextInput:
            id: username_input
            hint_text: "Username"
            size_hint_y: None
            height: "44dp"
            background_normal: ""
            background_color: (0.18, 0.18, 0.22, 1)
            foreground_color: (1,1,1,1)
            padding: ["12dp","10dp"]
            radius: [12,]
            opacity: 1 if root.mode=='register' else 0
            disabled: False if root.mode=='register' else True

        # Full Name input (only in registration)
        TextInput:
            id: fullname_input
            hint_text: "Full Name"
            size_hint_y: None
            height: "44dp"
            background_normal: ""
            background_color: (0.18, 0.18, 0.22, 1)
            foreground_color: (1,1,1,1)
            padding: ["12dp","10dp"]
            radius: [12,]
            opacity: 1 if root.mode=='register' else 0
            disabled: False if root.mode=='register' else True

        # Action button
        Button:
            id: action_button
            text: root.action_text
            size_hint_y: None
            height: "48dp"
            background_normal: ""
            background_color: (0.24, 0.49, 1, 1)
            color: (1,1,1,1)
            font_size: "16sp"
            bold: True
            radius: [14,]
            on_release: root.do_action()

        # Toggle Login/Register
        Button:
            id: switch_button
            text: "Switch to Register"
            size_hint_y: None
            height: "44dp"
            background_normal: ""
            background_color: (0.16,0.16,0.19,1)
            color: (0.8,0.85,0.9,1)
            font_size: "14sp"
            radius: [12,]
            on_release: root.toggle_mode()

<MainScreen>:
    name: "main"
    BoxLayout:
        orientation: "horizontal"
        spacing: "20dp"
        padding: "24dp"
        canvas.before:
            Color:
                rgba: (0.12, 0.12, 0.15, 1) 
            Rectangle:
                pos: self.pos
                size: self.size

        # Left side - events with modern scrollbar
        ScrollView:
            id: scroll_events
            size_hint_x: 0.4 
            bar_width: 6
            scroll_type: ['bars', 'content']
            effect_cls: "ScrollEffect"
            bar_color: (0.24, 0.49, 1, 0.9) 
            bar_inactive_color: (0.3,0.5,1,0.3)  
            canvas.before:
                Color:
                    rgba: (0,0,0,0)
                Rectangle:
                    pos: self.pos
                    size: self.size

            RecycleView:
                id: events
                viewclass: "EventRow"
                bar_width: 0
                RecycleBoxLayout:
                    default_size: None, dp(54)
                    default_size_hint: 1, None
                    size_hint_y: None
                    height: self.minimum_height
                    orientation: "vertical"
                    spacing: "8dp"

        # Right side - camera
        Image:
            id: camera_widget
            size_hint_x: 0.6
            size_hint_y: 1
            height: self.width
            allow_stretch: True
            keep_ratio: True
            canvas.before:
                Color:
                    rgba: (0.16, 0.16, 0.19, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20,]

<EventRow@BoxLayout>:
    size_hint_y: None
    height: "54dp"
    padding: "10dp"
    spacing: "16dp"
    canvas.before:
        Color:
            rgba: (0.18, 0.18, 0.22, 1)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [14,]
    Label:
        text: root.date
        color: (0.7,0.7,0.75,1)
        font_size: "14sp"
    Label:
        text: root.title
        color: (1,1,1,1)
        font_size: "16sp"
        bold: True